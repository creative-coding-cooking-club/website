<div class="canvas-wrapper"><canvas id="glcanvas"></canvas></div>
<script type="text/javascript" src="/cables_sketches/kitchen/patch.js" async></script>

<script>
  /**
   * Called when there was a cables error.
   * @param {string} errId - ID of the error, e.g. 'NO_WEBGL' or 'NO_WEBAUDIO'
   *                         when the browser does not support the used APIs
   * @param {string} errMsg - The error message
   */
  function showError(errId, errMsg) {
    console.error(errId, errMsg);
  }

  function patchInitialized() {
      // You can now access the patch object (CABLES.patch), register variable watchers and so on
      console.log("HERE")
  }

  function patchFinishedLoading() {
      // The patch is ready now, all assets have been loaded
  }

  document.addEventListener('CABLES.jsLoaded', function(event) {
    console.log("YIP")
    CABLES.patch = new CABLES.Patch({
      patch: CABLES.exportedPatch,
      prefixAssetPath: '/cables_sketches/kitchen/',
      glCanvasId: 'glcanvas',
      glCanvasResizeToParent: true,
      onError: showError,
      onPatchLoaded: patchInitialized,
      onFinishedLoading: patchFinishedLoading,
    });
  });
</script>
